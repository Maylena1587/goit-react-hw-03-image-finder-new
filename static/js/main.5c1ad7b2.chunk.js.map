{"version":3,"sources":["Components/Modal/Modal.module.css","Components/ImageGalleryItem/ImageGalleryItem.module.css","Components/Container/Container.module.css","Components/Button/Button.module.css","Components/ImageGalleryView/ImageGalleryView.module.css","Components/ImageGallery/ImageGallery.module.css","Components/Container/Container.js","Components/Searchbar/Searchbar.js","Components/Button/Button.js","services/pixabay-api.js","images/initialScreenPlaceholder.jpg","images/errorPlaceholder.jpg","Components/Modal/Modal.js","Components/ImageGalleryItem/ImageGalleryItem.js","Components/ImageGallery/ImageGallery.js","Components/ImageGalleryView/ImageGalleryView.js","App.js","reportWebVitals.js","index.js","Components/Searchbar/Searchbar.module.css"],"names":["module","exports","Container","children","className","styles","container","Searchbar","props","state","value","handleInput","e","setState","target","handleSubmit","preventDefault","query","toLowerCase","trim","toast","error","btn","current","blur","getSearchQuery","React","createRef","s","searchbar","form","onSubmit","this","type","ref","Provider","size","input","placeholder","onChange","Component","Button","updateSearchPage","onClick","KEY","BASE_URL","searchQuery","page","a","url","getData","then","response","fetch","images","json","api","fetchImages","modalRoot","document","querySelector","Modal","handleModalClosureOnEsc","code","toggleModal","handleBackdropClick","currentTarget","handleBtnClick","window","addEventListener","removeEventListener","createPortal","backdrop","content","closeIcon","ImageGalleryItem","image","showBigImageInModal","item","src","webformatURL","previewURL","loading","style","opacity","alt","tags","data-image","largeImageURL","ImageGallery","gallery","map","id","Status","ImageGalleryView","totalSearchResults","status","modalIsOpen","imageInModal","activeImage","updateImageAvialability","result","length","renderNewSearchQuery","nextQuery","nextPage","resetSearchPage","imageAPI","console","log","totalHits","hits","catch","finally","data","renderMorePages","prevState","scrollTo","top","documentElement","scrollHeight","behavior","dataset","prevProps","prevQuery","prevPage","initialScreenPlaceholder","css","color","errorPlaceholder","App","searchPage","moreImagesAvailable","autoClose","reportWebVitals","onPerfEntry","Function","getCLS","getFID","getFCP","getLCP","getTTFB","ReactDOM","render","StrictMode","getElementById"],"mappings":"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","file":"static/js/main.5c1ad7b2.chunk.js","sourcesContent":["// extracted by mini-css-extract-plugin\nmodule.exports = {\"backdrop\":\"Modal_backdrop__2C1Vf\",\"content\":\"Modal_content__30AxT\",\"closeIcon\":\"Modal_closeIcon__1ee5S\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"item\":\"ImageGalleryItem_item__3ovJO\",\"image\":\"ImageGalleryItem_image__1jvAw\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"container\":\"Container_container__2dyD4\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"btn\":\"Button_btn__1m_NA\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"image\":\"ImageGalleryView_image__2UMl6\"};","// extracted by mini-css-extract-plugin\nmodule.exports = {\"gallery\":\"ImageGallery_gallery__15T5Q\"};","import styles from './Container.module.css';\r\n\r\nexport default function Container({ children }) {\r\n  return <div className={styles.container}>{children}</div>;\r\n}","import React, { Component } from 'react';\r\nimport { FiSearch } from 'react-icons/fi';\r\nimport { IconContext } from 'react-icons';\r\nimport { toast } from 'react-toastify';\r\nimport PropTypes from 'prop-types';\r\n\r\nimport s from './Searchbar.module.css';\r\n\r\nclass Searchbar extends Component {\r\n  constructor(props) {\r\n    super(props);\r\n    this.btn = React.createRef();\r\n  }\r\n\r\n  state = {\r\n    value: '',\r\n  };\r\n\r\n  handleInput = e => {\r\n    this.setState({ value: e.target.value });\r\n  };\r\n\r\n  handleSubmit = e => {\r\n    e.preventDefault();\r\n    const query = this.state.value.toLowerCase().trim();\r\n    if (query === '') {\r\n      toast.error('Please enter a query');\r\n      this.btn.current.blur();\r\n      return;\r\n    }\r\n    this.props.getSearchQuery(query);\r\n    this.setState({ value: '' });\r\n    this.btn.current.blur();\r\n  };\r\n\r\n  render() {\r\n    return (\r\n      <header className={s.searchbar}>\r\n        <form className={s.form} onSubmit={this.handleSubmit}>\r\n          <button type=\"submit\" className={s.btn} ref={this.btn}>\r\n            <IconContext.Provider value={{ size: '16px' }}>\r\n              <FiSearch />\r\n            </IconContext.Provider>\r\n          </button>\r\n\r\n          <input\r\n            className={s.input}\r\n            type=\"text\"\r\n            value={this.state.value}\r\n            placeholder=\"Search images and photos\"\r\n            onChange={this.handleInput}\r\n          />\r\n        </form>\r\n      </header>\r\n    );\r\n  }\r\n}\r\n\r\nexport default Searchbar;\r\n\r\nSearchbar.propTypes = {\r\n  getSearchQuery: PropTypes.func.isRequired,\r\n};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport s from './Button.module.css';\r\n\r\nfunction Button({ updateSearchPage }) {\r\n  return (\r\n    <button className={s.btn} onClick={updateSearchPage}>\r\n      Load more\r\n    </button>\r\n  );\r\n}\r\n\r\nexport default Button;\r\n\r\nButton.propTypes = {\r\n  updateSearchPage: PropTypes.func.isRequired,\r\n};","const KEY = '18962627-3cde470dd8252503102b1f7f8';\r\nconst BASE_URL = `https://pixabay.com/api/`;\r\n\r\nasync function fetchImages(searchQuery, page) {\r\n  const url = `${BASE_URL}?image_type=photo&orientation=horizontal&q=${searchQuery}&page=${page}&per_page=12&key=${KEY}`;\r\n\r\n  return getData(url).then(response => {\r\n    return response;\r\n  });\r\n}\r\n\r\nasync function getData(url) {\r\n  const images = await fetch(url);\r\n  const response = await images.json();\r\n  return response;\r\n}\r\n\r\nconst api = {\r\n  fetchImages,\r\n};\r\n\r\nexport default api;","export default __webpack_public_path__ + \"static/media/initialScreenPlaceholder.6b48318a.jpg\";","export default __webpack_public_path__ + \"static/media/errorPlaceholder.8bd4b3d9.jpg\";","import React, { Component } from 'react';\r\nimport { createPortal } from 'react-dom';\r\nimport { FaWindowClose } from 'react-icons/fa';\r\nimport { IconContext } from 'react-icons';\r\nimport PropTypes from 'prop-types';\r\nimport s from './Modal.module.css';\r\n\r\nconst modalRoot = document.querySelector('#modal-root');\r\n\r\nclass Modal extends Component {\r\n  componentDidMount() {\r\n    window.addEventListener('keydown', this.handleModalClosureOnEsc);\r\n  }\r\n\r\n  componentWillUnmount() {\r\n    window.removeEventListener('keydown', this.handleModalClosureOnEsc);\r\n  }\r\n\r\n  handleModalClosureOnEsc = e => {\r\n    if (e.code === 'Escape') {\r\n      this.props.toggleModal();\r\n    }\r\n  };\r\n\r\n  handleBackdropClick = e => {\r\n    if (e.target === e.currentTarget) {\r\n      this.props.toggleModal();\r\n    }\r\n  };\r\n\r\n  handleBtnClick = () => {\r\n    this.props.toggleModal();\r\n  };\r\n\r\n  render() {\r\n    return createPortal(\r\n      <div className={s.backdrop} onClick={this.handleBackdropClick}>\r\n        <div className={s.content}>\r\n          <button className={s.closeIcon} onClick={this.handleBtnClick}>\r\n            <IconContext.Provider value={{ size: '36px' }}>\r\n              <FaWindowClose />\r\n            </IconContext.Provider>\r\n          </button>\r\n          {this.props.children}\r\n        </div>\r\n      </div>,\r\n      modalRoot,\r\n    );\r\n  }\r\n}\r\n\r\nexport default Modal;\r\n\r\nModal.propTypes = {\r\n  toggleModal: PropTypes.func.isRequired,\r\n};","import React from 'react';\r\nimport ProgressiveImage from 'react-progressive-image';\r\nimport PropTypes from 'prop-types';\r\nimport s from './ImageGalleryItem.module.css';\r\n\r\nfunction ImageGalleryItem({ image, showBigImageInModal }) {\r\n  return (\r\n    <li className={s.item}>\r\n      <ProgressiveImage src={image.webformatURL} placeholder={image.previewURL}>\r\n        {(src, loading) => (\r\n          <img\r\n            style={{ opacity: loading ? 0.5 : 1 }}\r\n            src={src}\r\n            alt={image.tags}\r\n            data-image={image.largeImageURL}\r\n            className={s.image}\r\n            onClick={showBigImageInModal}\r\n          />\r\n        )}\r\n      </ProgressiveImage>\r\n    </li>\r\n  );\r\n}\r\n\r\nexport default ImageGalleryItem;\r\n\r\nImageGalleryItem.propTypes = {\r\n  showBigImageInModal: PropTypes.func.isRequired,\r\n  image: PropTypes.object.isRequired,\r\n};","import React from 'react';\r\nimport PropTypes from 'prop-types';\r\nimport s from './ImageGallery.module.css';\r\nimport ImageGalleryItem from '../ImageGalleryItem';\r\n\r\nfunction ImageGallery({ images, showBigImageInModal }) {\r\n  return (\r\n    <ul className={s.gallery}>\r\n      {images &&\r\n        images.map(image => {\r\n          return (\r\n            <ImageGalleryItem\r\n              image={image}\r\n              showBigImageInModal={showBigImageInModal}\r\n              key={image.id}\r\n            />\r\n          );\r\n        })}\r\n    </ul>\r\n  );\r\n}\r\n\r\nexport default ImageGallery;\r\n\r\nImageGallery.propTypes = {\r\n  showBigImageInModal: PropTypes.func.isRequired,\r\n  images: PropTypes.arrayOf(PropTypes.object).isRequired,\r\n};","  \r\nimport React, { Component } from 'react';\r\nimport { toast } from 'react-toastify';\r\nimport { css } from '@emotion/core';\r\nimport PulseLoader from 'react-spinners/PulseLoader';\r\nimport ProgressiveImage from 'react-progressive-image';\r\nimport PropTypes from 'prop-types';\r\nimport s from './ImageGalleryView.module.css';\r\nimport imageAPI from '../../services/pixabay-api';\r\nimport initialScreenPlaceholder from '../../images/initialScreenPlaceholder.jpg';\r\nimport errorPlaceholder from '../../images/errorPlaceholder.jpg';\r\nimport Modal from '../Modal';\r\nimport ImageGallery from '../ImageGallery';\r\n\r\nconst Status = {\r\n  IDLE: 'idle',\r\n  PENDING: 'pending',\r\n  RESOLVED: 'resolved',\r\n  REJECTED: 'rejected',\r\n};\r\n\r\nclass ImageGalleryView extends Component {\r\n  state = {\r\n    images: null,\r\n    totalSearchResults: null,\r\n    error: null,\r\n    status: Status.IDLE,\r\n    modalIsOpen: false,\r\n    imageInModal: '',\r\n    activeImage: '',\r\n  };\r\n\r\n  componentDidUpdate(prevProps) {\r\n    const prevQuery = prevProps.searchQuery;\r\n    const nextQuery = this.props.searchQuery;\r\n    const prevPage = prevProps.page;\r\n    const nextPage = this.props.page;\r\n\r\n    if (prevQuery !== nextQuery) {\r\n      this.renderNewSearchQuery(nextQuery, nextPage);\r\n    }\r\n\r\n    if (prevPage !== nextPage && prevPage < nextPage) {\r\n      this.renderMorePages(nextQuery, nextPage);\r\n    }\r\n  }\r\n\r\n  updateImageAvialability = () => {\r\n    if (this.state.images) {\r\n      const result =\r\n        this.state.totalSearchResults > this.state.images.length ? true : false;\r\n      this.props.updateImageAvialability(result);\r\n    } else {\r\n      this.props.updateImageAvialability(false);\r\n    }\r\n  };\r\n\r\n  renderNewSearchQuery = (nextQuery, nextPage) => {\r\n    this.props.resetSearchPage();\r\n    this.setState({ images: null, status: Status.PENDING });\r\n    this.props.updateImageAvialability(false);\r\n\r\n    imageAPI\r\n      .fetchImages(nextQuery, nextPage)\r\n      .then(images => {\r\n        console.log(images);\r\n        if (images.totalHits === 0) {\r\n          toast.error(`No images for ${nextQuery}. Please try another query.`);\r\n          this.setState({\r\n            status: Status.REJECTED,\r\n          });\r\n\r\n          return;\r\n        }\r\n        if (images.hits.length === 0) {\r\n          toast.error(\r\n            `Oops! Pixabay failed us and forgot to send images. Please refresh page & try again.`,\r\n          );\r\n          this.setState({\r\n            status: Status.REJECTED,\r\n          });\r\n\r\n          return;\r\n        }\r\n        this.setState({\r\n          images: images.hits,\r\n          totalSearchResults: images.totalHits,\r\n          status: Status.RESOLVED,\r\n        });\r\n      })\r\n      .catch(error => this.setState({ error, status: Status.REJECTED }))\r\n      .finally(data => {\r\n        this.updateImageAvialability();\r\n      });\r\n  };\r\n\r\n  renderMorePages = (nextQuery, nextPage) => {\r\n    this.props.updateImageAvialability(false);\r\n\r\n    imageAPI\r\n      .fetchImages(nextQuery, nextPage)\r\n      .then(images => {\r\n        this.setState(prevState => ({\r\n          images: [...prevState.images, ...images.hits],\r\n        }));\r\n      })\r\n      .catch(error => this.setState({ error, status: Status.REJECTED }))\r\n      .finally(data => {\r\n        window.scrollTo({\r\n          top: document.documentElement.scrollHeight - 1300,\r\n          behavior: 'smooth',\r\n        });\r\n        this.updateImageAvialability();\r\n      });\r\n  };\r\n\r\n  toggleModal = () => {\r\n    this.setState(prevState => ({\r\n      modalIsOpen: !prevState.modalIsOpen,\r\n      imageInModal: '',\r\n      activeImage: '',\r\n    }));\r\n  };\r\n\r\n  showBigImageInModal = e => {\r\n    this.toggleModal();\r\n    this.setState(prevState => ({\r\n      imageInModal: prevState.imageInModal ? '' : e.target.dataset.image,\r\n      activeImage: prevState.activeImage ? '' : e.target.src,\r\n    }));\r\n  };\r\n\r\n  render() {\r\n    const {\r\n      status,\r\n      modalIsOpen,\r\n      imageInModal,\r\n      activeImage,\r\n      images,\r\n    } = this.state;\r\n\r\n    if (status === Status.IDLE) {\r\n      return (\r\n        <div>\r\n          <img src={initialScreenPlaceholder} alt=\"please enter a query\" />\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (status === Status.PENDING) {\r\n      return (\r\n        <PulseLoader\r\n\r\n          css={css`\r\n            margin: 4px;\r\n          `}\r\n          size={25}\r\n          color={'blue'}\r\n          loading={true}\r\n        />\r\n      );\r\n    }\r\n\r\n    if (status === Status.REJECTED) {\r\n      return (\r\n        <div>\r\n          <img src={errorPlaceholder} alt=\"error\" />\r\n        </div>\r\n      );\r\n    }\r\n\r\n    if (status === Status.RESOLVED) {\r\n      return (\r\n        <>\r\n          <ImageGallery\r\n            images={images}\r\n            showBigImageInModal={this.showBigImageInModal}\r\n          />\r\n          {modalIsOpen && (\r\n            <Modal toggleModal={this.toggleModal}>\r\n              <ProgressiveImage src={imageInModal} placeholder={activeImage}>\r\n                {(src, loading) => (\r\n                  <img\r\n                    style={{ opacity: loading ? 0.5 : 1 }}\r\n                    src={src}\r\n                    alt=\"\"\r\n                    className={s.image}\r\n                  />\r\n                )}\r\n              </ProgressiveImage>\r\n            </Modal>\r\n          )}\r\n        </>\r\n      );\r\n    }\r\n  }\r\n}\r\n\r\nexport default ImageGalleryView;\r\n\r\nImageGalleryView.propTypes = {\r\n  searchQuery: PropTypes.string.isRequired,\r\n  page: PropTypes.number.isRequired,\r\n  resetSearchPage: PropTypes.func.isRequired,\r\n  updateImageAvialability: PropTypes.func.isRequired,\r\n};","import React, { Component } from 'react';\nimport { ToastContainer } from 'react-toastify';\nimport 'react-toastify/dist/ReactToastify.css';\nimport Container from './Components/Container';\nimport Searchbar from './Components/Searchbar';\nimport Button from './Components/Button';\nimport ImageGalleryView from './Components/ImageGalleryView';\n\nclass App extends Component {\n  state = {\n    searchQuery: '',\n    searchPage: 1,\n    moreImagesAvailable: false,\n  };\n\n  getSearchQuery = query => {\n    this.setState({ searchQuery: query });\n  };\n\n  updateSearchPage = () => {\n    this.setState(prevState => ({ searchPage: prevState.searchPage + 1 }));\n  };\n\n  resetSearchPage = () => {\n    this.setState({ searchPage: 1 });\n  };\n\n  updateImageAvialability = status => {\n    this.setState({ moreImagesAvailable: status });\n  };\n\n  render() {\n    const { searchQuery, searchPage, moreImagesAvailable } = this.state;\n\n    return (\n      <Container>\n        <Searchbar getSearchQuery={this.getSearchQuery} />\n        <ImageGalleryView\n          searchQuery={searchQuery}\n          page={searchPage}\n          resetSearchPage={this.resetSearchPage}\n          updateImageAvialability={this.updateImageAvialability}\n        />\n        {moreImagesAvailable && (\n          <Button updateSearchPage={this.updateSearchPage} />\n        )}\n        <ToastContainer autoClose={3000} />\n      </Container>\n    );\n  }\n}\n\nexport default App;","const reportWebVitals = onPerfEntry => {\n  if (onPerfEntry && onPerfEntry instanceof Function) {\n    import('web-vitals').then(({ getCLS, getFID, getFCP, getLCP, getTTFB }) => {\n      getCLS(onPerfEntry);\n      getFID(onPerfEntry);\n      getFCP(onPerfEntry);\n      getLCP(onPerfEntry);\n      getTTFB(onPerfEntry);\n    });\n  }\n};\n\nexport default reportWebVitals;\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport reportWebVitals from './reportWebVitals';\n\nReactDOM.render(\n  <React.StrictMode>\n    <App />\n  </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want to start measuring performance in your app, pass a function\n// to log results (for example: reportWebVitals(console.log))\n// or send to an analytics endpoint. Learn more: https://bit.ly/CRA-vitals\nreportWebVitals();\n","// extracted by mini-css-extract-plugin\nmodule.exports = {\"searchbar\":\"Searchbar_searchbar__3doYC\",\"form\":\"Searchbar_form__3fV2I\",\"input\":\"Searchbar_input__1cIDh\",\"btn\":\"Searchbar_btn__3uJJx\",\"react-icons\":\"Searchbar_react-icons__2aquS\"};"],"sourceRoot":""}